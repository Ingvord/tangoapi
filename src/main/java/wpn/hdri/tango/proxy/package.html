<!--
  ~ The main contributor to this project is Institute of Materials Research,
  ~ Helmholtz-Zentrum Geesthacht,
  ~ Germany.
  ~
  ~ This project is a contribution of the Helmholtz Association Centres and
  ~ Technische Universitaet Muenchen to the ESS Design Update Phase.
  ~
  ~ The project's funding reference is FKZ05E11CG1.
  ~
  ~ Copyright (c) 2012. Institute of Materials Research,
  ~ Helmholtz-Zentrum Geesthacht,
  ~ Germany.
  ~
  ~ This program is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU General Public License
  ~ as published by the Free Software Foundation; either version 2
  ~ of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
  -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Extended Tango API: proxy</title>
</head>
<body>
<p>This is a proxy framework. It simplifies usage of fr.esrf.TangoApi.DeviceProxy.</p>

<p>Main class of this package is {@link wpn.hdri.tango.proxy.TangoProxyWrapper}. {@link
    wpn.hdri.tango.proxy.TangoEventCallback}
    is used in event mechanism.</p>

<p>User creates an instance of {@link wpn.hdri.tango.proxy.TangoProxyWrapper} through constructor:</p>
<pre>public TangoProxyWrapper(String deviceName)</pre>
<p>Internally TangoProxyWrapper creates a {@link fr.esrf.TangoApi.DeviceProxy} and operates on it. It greatly simplifies
    the usage of DeviceProxy in client code.
    Consider the following example: we want to read a double attribute from proxy. Usually we would need to write
    approximately the following code:</p>
<pre>
    DeviceProxy proxy = new DeviceProxy("some-device");
    DeviceAttribute attribute = proxy.read_attribute("some-attribute");
    if(result.hasFailed()){
        throw new Exception("Can not read attribute.");
    }
    int dataFormat = result.getDataFormat()
    int dataType = result.getType()
    double result;
    switch(dataType){
        case Tango_DEV_Double:
            switch(dataFormat){
                case _SCALAR:
                    result = attribute.extractDouble()
                ...
            }
        ...
    }
    ...
</pre>
<p>Using TangoProxyWrapper we can achieve the same result with the following code:</p>
<pre>
    TangoProxyWrapper proxy = new TangoProxyWrapper("some-device");
    double result = proxy.&lt;Double>readAttribute("some-attribute");
    ...
</pre>
<p>
    TangoProxyWrapper provides high-level methods to interact with the device: command execution, event un/subscription,
    checking attributes etc.
    See {@link wpn.hdri.tango.proxy.TangoProxyWrapper} for more details.
</p>
<hr/>
<h1>Event subscription</h1>

<p>Client subscribes to the event through {@link wpn.hdri.tango.proxy.TangoProxyWrapper#subscribeEvent(String,
    TangoEvent, TangoEventCallback)}. TangoEventCallback defines two methods: onEvent({@link
    wpn.hdri.tango.proxy.EventData})
    and onError(Throwable). EventData contains a value of appropriate type and a time. Consider the following
    example:</p>
<pre>
    TangoProxyWrapper proxy = new TangoProxyWrapper("some-device");
    ...
    int eventId = proxy.subscribeEvent("some-attribute",TangoEvent.CHANGE,new TangoEventCallback&lt;Double>(){
        public void onEvent(EventData&lt;Double> data){
            //do something with data
        }

        public void onError(Throwable cause){
            //handle error
        }
    });
    ...
    //now unsubscribe
    proxy.unsubscribeEvent(eventId);
    ...
</pre>
<p>
    Of course user should know which attribute of which type.
</p>

</body>
</html>